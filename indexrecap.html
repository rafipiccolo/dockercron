<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Docker cron</title>
        <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
        <!-- <script src="/socket.io/socket.io.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment-with-locales.min.js"></script>
        <style>body { background-color: #222; color: white;}</style>
    </head>
    <body>
        <div id="root"></div>
        <script type="text/babel">
            function Liste() {
                var [data, setData] = React.useState({});

                React.useEffect(() => {
                    (async () => {
                        const response = await fetch('/data');
                        const data = await response.json();

                        setData(data);
                    })()
                }, []);

                return <>
                    {Object.entries(data).map(([key, line]) => {
                        return (<div key={key}>
                            <h1>{key.substr(0, 8)}</h1>

                            {Object.entries(line).map(([cronname, cron]) => {
                                return (<div key={cronname}>
                                    <h2>{cron.name}</h2>
                                    command : {cron.command}<br />
                                    overlap : {cron['no-overlap']}<br />
                                    schedule : {cron.schedule}<br />
                                    <br />
                                </div>);
                            })}

                        </div>);
                    })}
                </>
            }

            ReactDOM.render(
                <>
                    <Liste />
                </>,
                document.getElementById('root')
            );

        </script>
    </body>
</html>
